# cbindgen configuration for zenoh-pico-shim
# Generates include/zenoh_shim.h from src/ffi.rs

language = "C"
header = """/**
 * zenoh-pico-shim Public C API
 *
 * AUTO-GENERATED by cbindgen - DO NOT EDIT MANUALLY
 *
 * This header defines the high-level C API for zenoh-pico that can be
 * called from Rust FFI. It provides session management, publishers, and
 * subscribers with static storage.
 *
 * Platform-specific behavior (threading vs polling) is handled by the
 * backend interface in zenoh_shim_platform.h
 */
"""
include_guard = "ZENOH_SHIM_H"
autogen_warning = "/* Warning: this file is autogenerated by cbindgen. Don't modify this manually. */"
include_version = false
no_includes = false

[defines]
# Note: We intentionally do NOT define "cbindgen" here.
# cbindgen automatically sets cfg(cbindgen)=true when parsing.
# By not mapping it to a C define, cbindgen filters items based on cfg
# rather than emitting C preprocessor guards.

[export.rename]
# Rename types if needed

[fn]
# Function configuration
rename_args = "None"

[struct]
rename_fields = "None"

[enum]
rename_variants = "None"

[parse]
parse_deps = false
# Don't emit extern "C" block declarations - we only want the stub functions
clean = true
# Only parse ffi.rs (not lib.rs which has the extern block imports)
include = ["ffi"]

[export]
# Only include items from the cbindgen_stubs module
exclude = []
include = [
    "zenoh_shim_init",
    "zenoh_shim_open",
    "zenoh_shim_is_open",
    "zenoh_shim_close",
    "zenoh_shim_declare_publisher",
    "zenoh_shim_publish",
    "zenoh_shim_undeclare_publisher",
    "zenoh_shim_declare_subscriber",
    "zenoh_shim_undeclare_subscriber",
    "zenoh_shim_poll",
    "zenoh_shim_spin_once",
    "zenoh_shim_uses_polling",
    "ShimCallback",
    "ZENOH_SHIM_MAX_PUBLISHERS",
    "ZENOH_SHIM_MAX_SUBSCRIBERS",
    "ZENOH_SHIM_OK",
    "ZENOH_SHIM_ERR_GENERIC",
    "ZENOH_SHIM_ERR_CONFIG",
    "ZENOH_SHIM_ERR_SESSION",
    "ZENOH_SHIM_ERR_TASK",
    "ZENOH_SHIM_ERR_KEYEXPR",
    "ZENOH_SHIM_ERR_FULL",
    "ZENOH_SHIM_ERR_INVALID",
    "ZENOH_SHIM_ERR_PUBLISH",
]
